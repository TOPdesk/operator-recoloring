class e{constructor(e,t,n){this.element=e,Object.keys(n.registeredGestures).forEach((e=>{this[e]=(r,s)=>(n.addBinding(this.element,e,r,s,t),this)}))}}let t={normalizeEvent(e){switch(e){case"mousedown":case"touchstart":case"pointerdown":return"start";case"mousemove":case"touchmove":case"pointermove":return"move";case"mouseup":case"touchend":case"pointerup":return"end";default:return null}},isWithin:(e,t,n,r,s)=>Math.abs(t-r)<=s&&Math.abs(e-n)<=s,distanceBetweenTwoPoints(e,t,n,r){let s=Math.sqrt((t-e)*(t-e)+(r-n)*(r-n));return Math.round(100*s)/100},getMidpoint:(e,t,n,r)=>({x:(e+t)/2,y:(n+r)/2}),getAngle(e,t,n,r){let s=Math.atan2(r-t,n-e)*(180/Math.PI);return 360-(s<0?360+s:s)},getAngularDistance(e,t){let n=(t-e)%360,r=n<0?1:-1;return n=Math.abs(n),n>180?r*(360-n):r*n},getVelocity(e,t,n,r,s,i){return this.distanceBetweenTwoPoints(e,r,t,s)/(i-n)},getRightMostInput(e){let t=null,n=Number.MIN_VALUE;return e.forEach((e=>{e.initial.x>n&&(t=e)})),t},isInteger:e=>"number"==typeof e&&e%1==0,isInside(e,t,n){const r=n.getBoundingClientRect();return e>r.left&&e<r.left+r.width&&t>r.top&&t<r.top+r.height},getPropagationPath(e){if(e.path)return e.path;{let t=[],n=e.target;for(;n!=document;)t.push(n),n=n.parentNode;return t}},getPathIndex(e,t){let n=e.length;return e.forEach(((e,r)=>{e===t&&(n=r)})),n},setMSPreventDefault(e){e.style["-ms-content-zooming"]="none",e.style["touch-action"]="none"},removeMSPreventDefault(e){e.style["-ms-content-zooming"]="",e.style["touch-action"]=""}};class n{constructor(){this.type=null,this.id=null}setType(e){this.type=e}getType(){return this.type}setId(e){this.id=e}getId(){return null!==this.id?this.id:this.type}update(e){for(let t in e)this[t]&&(this[t]=e[t])}start(e,t,n){return null}move(e,t,n){return null}end(e){return null}isValid(e,n,r){let s=!0;return e.length>1&&e.forEach((e=>{t.isInside(e.initial.x,e.initial.y,r)||(s=!1)})),s}}function r(e,t,n){t.events=n;const r=new CustomEvent(e.gesture.getId(),{detail:t,bubbles:!0,cancelable:!0});!function(e,t,n){e.dispatchEvent(t),n.bindOnce&&ZingTouch.unbind(n.element,n.gesture.getType())}(e.element,r,e)}function s(e,n){const s=n.state;if(0===s.inputs.length&&"start"!==t.normalizeEvent(e.type))return;if(void 0!==e.buttons&&"end"!==t.normalizeEvent(e.type)&&0===e.buttons)return void s.resetInputs();if(!s.updateInputs(e,n.element))return;const i=s.retrieveBindingsByInitialPos();if(i.length>0){n.preventDefault?(t.setMSPreventDefault(n.element),e.preventDefault?e.preventDefault():e.returnValue=!1):t.removeMSPreventDefault(n.element);const u={},o=function(e,n,r){const s=t.normalizeEvent(n.type),i=[];return e.forEach((e=>{let t=e.gesture[s](r.inputs,r,e.element);if(t){const n=[];r.inputs.forEach((e=>{n.push(e.current)})),i.push({binding:e,data:t,events:n})}})),i}(i,e,s);o.forEach((n=>{const r=n.binding.gesture.id;if(u[r]){const s=t.getPropagationPath(e);t.getPathIndex(s,n.binding.element)<t.getPathIndex(s,u[r].binding.element)&&(u[r]=n)}else u[r]=n})),Object.keys(u).forEach((e=>{const t=u[e];r(t.binding,t.data,t.events)}))}let u=0;s.inputs.forEach((e=>{"end"===e.getCurrentEventType()&&u++})),u===s.inputs.length&&s.resetInputs()}class i extends n{constructor(e){super(),this.type="distance",this.threshold=e&&e.threshold?e.threshold:1}start(e,n,r){if(!this.isValid(e,n,r))return null;if(2===e.length){e[0].getGestureProgress(this.type).lastEmittedDistance=t.distanceBetweenTwoPoints(e[0].current.x,e[1].current.x,e[0].current.y,e[1].current.y)}}move(e,n,r){if(2===n.numActiveInputs()){let n=t.distanceBetweenTwoPoints(e[0].current.x,e[1].current.x,e[0].current.y,e[1].current.y),r=t.distanceBetweenTwoPoints(e[0].previous.x,e[1].previous.x,e[0].previous.y,e[1].previous.y);const s=t.getMidpoint(e[0].current.x,e[1].current.x,e[0].current.y,e[1].current.y);let i=e[0].getGestureProgress(this.type);if("Expand"===this.constructor.name){if(n<r)i.lastEmittedDistance=n;else if(n-i.lastEmittedDistance>=this.threshold)return i.lastEmittedDistance=n,{distance:n,center:s}}else if(n>r)i.lastEmittedDistance=n;else if(n<r&&i.lastEmittedDistance-n>=this.threshold)return i.lastEmittedDistance=n,{distance:n,center:s};return null}}}class u extends i{constructor(e){super(e),this.type="expand"}}class o extends n{constructor(e){super(),this.type="pan",this.numInputs=e&&e.numInputs?e.numInputs:1,this.threshold=e&&e.threshold?e.threshold:1}start(e){e.forEach((e=>{let t=e.getGestureProgress(this.getId());t.active=!0,t.lastEmitted={x:e.current.x,y:e.current.y}}))}move(e,n,r){if(this.numInputs===e.length){var s={data:[]};for(let n=0;n<e.length;n++){let r=e[n].getGestureProgress(this.getId()),i=!1;const u=Math.abs(e[n].current.y-r.lastEmitted.y)>this.threshold,o=Math.abs(e[n].current.x-r.lastEmitted.x)>this.threshold;if(i=u||o,!r.active||!i)return null;s.data[n]={distanceFromOrigin:t.distanceBetweenTwoPoints(e[n].initial.x,e[n].current.x,e[n].initial.y,e[n].current.y),directionFromOrigin:t.getAngle(e[n].initial.x,e[n].initial.y,e[n].current.x,e[n].current.y),currentDirection:t.getAngle(r.lastEmitted.x,r.lastEmitted.y,e[n].current.x,e[n].current.y)},r.lastEmitted.x=e[n].current.x,r.lastEmitted.y=e[n].current.y}}return s}end(e){return e.forEach((e=>{e.getGestureProgress(this.getId()).active=!1})),null}}class a extends i{constructor(e){super(e),this.type="pinch"}}class l extends n{constructor(){super(),this.type="rotate"}move(e,n,r){if(n.numActiveInputs()<=2){let s,i,u,o;if(1===n.numActiveInputs()){let t=r.getBoundingClientRect();s={x:t.left+t.width/2,y:t.top+t.height/2},o=e[0],i=u=0}else{s=t.getMidpoint(e[0].initial.x,e[1].initial.x,e[0].initial.y,e[1].initial.y);let n=t.getMidpoint(e[0].current.x,e[1].current.x,e[0].current.y,e[1].current.y);i=s.x-n.x,u=s.y-n.y,o=t.getRightMostInput(e)}let a=t.getAngle(s.x,s.y,o.current.x+i,o.current.y+u),l=o.getGestureProgress(this.getId());return l.initialAngle?(l.change=t.getAngularDistance(l.previousAngle,a),l.distance=l.distance+l.change):(l.initialAngle=l.previousAngle=a,l.distance=l.change=0),l.previousAngle=a,{angle:a,distanceFromOrigin:l.distance,distanceFromLast:l.change}}return null}}class c extends n{constructor(e){super(),this.type="swipe",this.numInputs=e&&e.numInputs?e.numInputs:1,this.maxRestTime=e&&e.maxRestTime?e.maxRestTime:100,this.escapeVelocity=e&&e.escapeVelocity?e.escapeVelocity:.2,this.timeDistortion=e&&e.timeDistortion?e.timeDistortion:100,this.maxProgressStack=e&&e.maxProgressStack?e.maxProgressStack:10}move(e,t,n){if(this.numInputs===e.length)for(let t=0;t<e.length;t++){let n=e[t].getGestureProgress(this.getId());n.moves||(n.moves=[]),n.moves.push({time:(new Date).getTime(),x:e[t].current.x,y:e[t].current.y}),n.length>this.maxProgressStack&&n.moves.shift()}return null}end(e){if(this.numInputs===e.length){let s={data:[]};for(var n=0;n<e.length;n++){if("end"!==e[n].current.type)return;let i=e[n].getGestureProgress(this.getId());if(i.moves&&i.moves.length>2){let e,u=i.moves.pop();if((new Date).getTime()-u.time>this.maxRestTime)return null;let o=i.moves.length-1;for(;-1!==o;){if(i.moves[o].time!==u.time){e=i.moves[o];break}o--}e||(e=i.moves.pop(),e.time+=this.timeDistortion);var r=t.getVelocity(e.x,e.y,e.time,u.x,u.y,u.time);s.data[n]={velocity:r,distance:t.distanceBetweenTwoPoints(e.x,u.x,e.y,u.y),duration:u.time-e.time,currentDirection:t.getAngle(e.x,e.y,u.x,u.y)}}}for(n=0;n<s.data.length;n++)if(r<this.escapeVelocity)return null;if(s.data.length>0)return s}return null}}class h extends n{constructor(e){super(),this.type="tap",this.minDelay=e&&e.minDelay?e.minDelay:0,this.maxDelay=e&&e.maxDelay?e.maxDelay:300,this.numInputs=e&&e.numInputs?e.numInputs:1,this.tolerance=e&&e.tolerance?e.tolerance:10}start(e){return e.length===this.numInputs&&e.forEach((e=>{e.getGestureProgress(this.type).start=(new Date).getTime()})),null}move(e,n,r){for(let n=0;n<e.length;n++)if("move"===e[n].getCurrentEventType()){let r=e[n].current,s=e[n].previous;if(!t.isWithin(r.x,r.y,s.x,s.y,this.tolerance)){let t=this.type;return e.forEach((function(e){e.resetProgress(t)})),null}}return null}end(e){if(e.length!==this.numInputs)return null;let t=Number.MAX_VALUE;for(let n=0;n<e.length;n++){if("end"!==e[n].getCurrentEventType())return null;let r=e[n].getGestureProgress(this.type);if(!r.start)return null;r.start<t&&(t=r.start)}let n=(new Date).getTime()-t;if(this.minDelay<=n&&this.maxDelay>=n)return{interval:n};{let t=this.type;return e.forEach((function(e){e.resetProgress(t)})),null}}}class d{constructor(e,t,n,r,s){this.element=e,this.gesture=t,this.handler=n,this.capture=void 0!==r&&r,this.bindOnce=void 0!==s&&s}}class g{constructor(e,n){let r;if(this.originalEvent=e,this.type=t.normalizeEvent(e.type),this.x=0,this.y=0,e.touches&&e.changedTouches){for(let t=0;t<e.changedTouches.length;t++)if(e.changedTouches[t].identifier===n){r=e.changedTouches[t];break}}else r=e;this.x=this.clientX=r.clientX,this.y=this.clientY=r.clientY,this.pageX=r.pageX,this.pageY=r.pageY,this.screenX=r.screenX,this.screenY=r.screenY}}class p{constructor(e,t){let n=new g(e,t);this.initial=n,this.current=n,this.previous=n,this.identifier=void 0!==t?t:0,this.progress={}}update(e,t){this.previous=this.current,this.current=new g(e,t)}getGestureProgress(e){return this.progress[e]||(this.progress[e]={}),this.progress[e]}getCurrentEventType(){return this.current.type}resetProgress(e){this.progress[e]={}}}class m{constructor(e){this.regionId=e,this.inputs=[],this.bindings=[],this.numGestures=0,this.registeredGestures={},this.registerGesture(new u,"expand"),this.registerGesture(new o,"pan"),this.registerGesture(new l,"rotate"),this.registerGesture(new a,"pinch"),this.registerGesture(new c,"swipe"),this.registerGesture(new h,"tap")}addBinding(e,t,r,s,i){let u;if(e&&void 0===e.tagName)throw new Error("Parameter element is an invalid object.");if("function"!=typeof r)throw new Error("Parameter handler is invalid.");if("string"==typeof t&&-1===Object.keys(this.registeredGestures).indexOf(t))throw new Error("Parameter "+t+" is not a registered gesture");if("object"==typeof t&&!(t instanceof n))throw new Error("Parameter for the gesture is not of a Gesture type");"string"==typeof t?u=this.registeredGestures[t]:(u=t,""===u.id&&this.assignGestureId(u)),this.bindings.push(new d(e,u,r,s,i)),e.addEventListener(u.getId(),r,s)}retrieveBindingsByElement(e){let t=[];return this.bindings.map((n=>{n.element===e&&t.push(n)})),t}retrieveBindingsByInitialPos(){let e=[];return this.bindings.forEach((n=>{this.inputs.filter((e=>t.isInside(e.initial.x,e.initial.y,n.element))).length>0&&e.push(n)})),e}updateInputs(e,n){let r=0;switch(e.touches?"TouchEvent":e.pointerType?"PointerEvent":"MouseEvent"){case"TouchEvent":for(let i in e.changedTouches)e.changedTouches.hasOwnProperty(i)&&t.isInteger(parseInt(i))&&(r=e.changedTouches[i].identifier,s(e,this,r,n));break;case"PointerEvent":r=e.pointerId,s(e,this,r,n);break;default:s(e,this,0,n)}return!0;function s(e,n,r,s){let i=t.normalizeEvent(e.type),u=function(e,t){for(let n=0;n<e.length;n++)if(e[n].identifier===t)return e[n];return null}(n.inputs,r);"start"===i&&u?n.resetInputs():("start"===i||!u||t.isInside(u.current.x,u.current.y,s))&&("start"===i||u)?"start"===i?n.inputs.push(new p(e,r)):u.update(e,r):n.resetInputs()}}resetInputs(){this.inputs=[]}numActiveInputs(){return this.inputs.filter((e=>"end"!==e.current.type)).length}registerGesture(e,t){this.assignGestureId(e),this.registeredGestures[t]=e}assignGestureId(e){e.setId(this.regionId+"-"+this.numGestures++)}}class f{constructor(e,t,n,r){this.id=r,this.element=e,this.capture=void 0!==t&&t,this.preventDefault=void 0===n||n,this.state=new m(r);let i=[];i=window.PointerEvent&&!window.TouchEvent?["pointerdown","pointermove","pointerup"]:["mousedown","mousemove","mouseup","touchstart","touchmove","touchend"],i.map((t=>{e.addEventListener(t,(e=>{s(e,this)}),this.capture)}))}bind(t,n,r,s,i){if(!t||t&&!t.tagName)throw"Bind must contain an element";if(i=void 0!==i&&i,!n)return new e(t,i,this.state);this.state.addBinding(t,n,r,s,i)}bindOnce(e,t,n,r){this.bind(e,t,n,r,!0)}unbind(e,t){let n=this.state.retrieveBindingsByElement(e),r=[];return n.forEach((n=>{if(t){if("string"==typeof t&&this.state.registeredGestures[t]){this.state.registeredGestures[t].id===n.gesture.id&&(e.removeEventListener(n.gesture.getId(),n.handler,n.capture),r.push(n))}}else e.removeEventListener(n.gesture.getId(),n.handler,n.capture),r.push(n)})),r}register(e,t){if("string"!=typeof e)throw new Error("Parameter key is an invalid string");if(!t instanceof n)throw new Error("Parameter gesture is an invalid Gesture object");t.setType(e),this.state.registerGesture(t,e)}unregister(e){this.state.bindings.forEach((t=>{t.gesture.getType()===e&&t.element.removeEventListener(t.gesture.getId(),t.handler,t.capture)}));let t=this.state.registeredGestures[e];return delete this.state.registeredGestures[e],t}}let y={_regions:[],Gesture:n,Expand:u,Pan:o,Pinch:a,Rotate:l,Swipe:c,Tap:h,Region:function(e,t,n){let r=y._regions.length,s=new f(e,t,n,r);return y._regions.push(s),s}};!function(){const e=document.querySelector("#main"),t=new y.Region(e,!1,!1);document.querySelectorAll("rec-carousel").forEach((e=>{t.bind(e,"swipe",(t=>{const n=t.detail.data[0].currentDirection;n>=0&&n<30||n>330&&n<=360?e.handlePrevious():n>150&&n<210&&e.handleNext()}),!1)}))}(),function(){const e=document.querySelector("#filter-form"),t=document.querySelector("#filter-form-submit"),n=document.querySelector("#filter-form-field"),r=document.querySelector("#filter-eyedropper"),s=document.querySelector("#filter-calculator");t.removeAttribute("aria-disabled"),window.EyeDropper&&(r.removeAttribute("hidden"),r.addEventListener("click",(async()=>{const e=new EyeDropper;try{const t=await e.open();n.value=t.sRGBHex}catch(e){}}))),e.addEventListener("submit",(e=>{e.preventDefault(),s.calculate(n.value)}))}();
